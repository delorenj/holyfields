{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://33god.dev/schemas/theboard/events/meeting_failed.json",
  "title": "Meeting Failed Event",
  "description": "Emitted when meeting execution fails. Payload contains error context for debugging.",
  "type": "object",
  "allOf": [
    {
      "$ref": "../../common/schemas/base_event.json"
    }
  ],
  "properties": {
    "event_type": {
      "type": "string",
      "const": "meeting.failed",
      "description": "Event type discriminator"
    },
    "error_type": {
      "type": "string",
      "enum": ["agent_error", "timeout", "network_error", "validation_error", "internal_error"],
      "description": "Category of error that caused failure"
    },
    "error_message": {
      "type": "string",
      "minLength": 1,
      "maxLength": 2000,
      "description": "Human-readable error message for debugging"
    },
    "round_num": {
      "anyOf": [
        {
          "$ref": "../../common/schemas/types.json#/$defs/round_number"
        },
        {
          "type": "null"
        }
      ],
      "description": "Round number when failure occurred (null if before meeting started)"
    },
    "agent_name": {
      "anyOf": [
        {
          "$ref": "../../common/schemas/types.json#/$defs/agent_name"
        },
        {
          "type": "null"
        }
      ],
      "description": "Agent that caused the error (null if not agent-specific)"
    }
  },
  "required": [
    "event_type",
    "timestamp",
    "meeting_id",
    "error_type",
    "error_message"
  ],
  "additionalProperties": false,
  "examples": [
    {
      "event_type": "meeting.failed",
      "timestamp": "2024-01-15T10:33:45Z",
      "meeting_id": "550e8400-e29b-41d4-a716-446655440000",
      "error_type": "agent_error",
      "error_message": "Agent 'Alice' failed to generate response: API rate limit exceeded",
      "round_num": 3,
      "agent_name": "Alice"
    },
    {
      "event_type": "meeting.failed",
      "timestamp": "2024-01-15T10:30:15Z",
      "meeting_id": "550e8400-e29b-41d4-a716-446655440001",
      "error_type": "validation_error",
      "error_message": "Meeting topic cannot be empty string",
      "round_num": null,
      "agent_name": null
    }
  ]
}
