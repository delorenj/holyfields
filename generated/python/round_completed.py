# generated by datamodel-codegen:
#   filename:  round_completed.json
#   timestamp: 2026-01-25T15:24:35+00:00

from __future__ import annotations

from typing import Literal
from uuid import UUID

from pydantic import AwareDatetime, ConfigDict, Field

from base_event import BaseEvent


class RoundCompletedEvent(BaseEvent):
    """
    Emitted when a meeting round completes. Payload contains round metrics and convergence indicators.
    """

    model_config = ConfigDict(
        extra="forbid",
    )
    event_type: Literal["meeting.round_completed"]
    """
    Event type discriminator
    """
    round_num: int = Field(..., ge=1)
    """
    Round number that just completed
    """
    agent_name: str = Field(..., max_length=100, min_length=1)
    """
    Name of agent who contributed in this round
    """
    response_length: int = Field(..., ge=0)
    """
    Character length of agent's response
    """
    comment_count: int = Field(..., ge=0)
    """
    Number of comments extracted from response
    """
    avg_novelty: float = Field(..., ge=0.0, le=1.0)
    """
    Average novelty score of extracted comments
    """
    tokens_used: int = Field(..., ge=0)
    """
    Total tokens consumed (input + output)
    """
    cost: float = Field(..., ge=0.0)
    """
    Cost in USD for this round's LLM calls
    """
    timestamp: AwareDatetime
    """
    ISO 8601 UTC timestamp when event was emitted
    """
    meeting_id: UUID = Field(
        ..., pattern="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
    )
    """
    UUID of the meeting this event relates to. Used for event correlation and tracing.
    """
