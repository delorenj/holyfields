# generated by datamodel-codegen:
#   filename:  comment_extracted.json
#   timestamp: 2026-01-25T15:24:35+00:00

from __future__ import annotations

from enum import StrEnum
from typing import Literal
from uuid import UUID

from pydantic import AwareDatetime, BaseModel, ConfigDict, Field, RootModel


class Category(StrEnum):
    """
    Comment category classified by notetaker agent
    """

    question = "question"
    concern = "concern"
    idea = "idea"
    observation = "observation"
    recommendation = "recommendation"
    clarification = "clarification"
    other = "other"


class RoundNumber(RootModel[int]):
    root: int = Field(..., ge=1)
    """
    Meeting round number (1-indexed)
    """


class Timestamp1(RootModel[AwareDatetime]):
    root: AwareDatetime = Field(
        ..., examples=["2024-01-15T10:30:00Z", "2024-12-31T23:59:59.999Z"]
    )
    """
    ISO 8601 timestamp in UTC (e.g., '2024-01-15T10:30:00Z')
    """


class Uuid1(RootModel[UUID]):
    root: UUID = Field(
        ...,
        examples=["550e8400-e29b-41d4-a716-446655440000"],
        pattern="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
    )
    """
    RFC 4122 UUID
    """


class SemanticVersion(RootModel[str]):
    root: str = Field(
        ..., examples=["1.0.0", "2.1.3", "0.1.0"], pattern="^\\d+\\.\\d+\\.\\d+$"
    )
    """
    Semantic version (major.minor.patch)
    """


class MeetingStatus(StrEnum):
    """
    Meeting lifecycle status
    """

    created = "created"
    running = "running"
    paused = "paused"
    converged = "converged"
    completed = "completed"
    failed = "failed"


class AgentName(RootModel[str]):
    root: str = Field(..., max_length=100, min_length=1)
    """
    AI agent name (e.g., 'Alice', 'Bob', 'DomainExpert')
    """


class BaseEvent(BaseModel):
    """
    Base schema for all TheBoard events. Provides common fields for event routing, tracing, and correlation. All component events extend this base.
    """

    event_type: str = Field(
        ...,
        examples=[
            "theboard.meeting.created",
            "theboard.meeting.started",
            "theboard.round_completed",
        ],
        pattern="^[a-z0-9]+\\.[a-z0-9._]+$",
    )
    """
    Event discriminator for routing (e.g., 'theboard.meeting.created'). Used by Bloodbank for topic-based routing.
    """
    timestamp: AwareDatetime
    """
    ISO 8601 UTC timestamp when event was emitted
    """
    meeting_id: UUID = Field(
        ..., pattern="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
    )
    """
    UUID of the meeting this event relates to. Used for event correlation and tracing.
    """


class CommentExtractedEvent(BaseEvent):
    """
    Emitted when comments are extracted from agent response. Payload contains comment metadata for analytics.
    """

    model_config = ConfigDict(
        extra="forbid",
    )
    event_type: Literal["meeting.comment_extracted"]
    """
    Event type discriminator
    """
    round_num: int = Field(..., ge=1)
    """
    Round number when comment was extracted
    """
    agent_name: str = Field(..., max_length=100, min_length=1)
    """
    Agent who authored the comment
    """
    comment_text: str = Field(..., max_length=5000, min_length=1)
    """
    Extracted comment text
    """
    category: Category
    """
    Comment category classified by notetaker agent
    """
    novelty_score: float = Field(..., ge=0.0, le=1.0)
    """
    Novelty score (0.0 = repetitive, 1.0 = novel)
    """
    timestamp: AwareDatetime
    """
    ISO 8601 UTC timestamp when event was emitted
    """
    meeting_id: UUID = Field(
        ..., pattern="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
    )
    """
    UUID of the meeting this event relates to. Used for event correlation and tracing.
    """
