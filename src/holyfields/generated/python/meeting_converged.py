# generated by datamodel-codegen:
#   filename:  meeting_converged.json
#   timestamp: 2026-01-25T15:34:37+00:00

from __future__ import annotations

from typing import Literal
from uuid import UUID

from pydantic import AwareDatetime, ConfigDict, Field

from .comment_extracted import BaseEvent


class MeetingConvergedEvent(BaseEvent):
    """
    Emitted when meeting reaches convergence. Payload contains convergence metrics and stopping criteria.
    """

    model_config = ConfigDict(
        extra="forbid",
    )
    event_type: Literal["meeting.converged"]
    """
    Event type discriminator
    """
    round_num: int = Field(..., ge=1)
    """
    Round number when convergence detected
    """
    avg_novelty: float = Field(..., ge=0.0, le=1.0)
    """
    Average novelty score that triggered convergence
    """
    novelty_threshold: float = Field(..., ge=0.0, le=1.0)
    """
    Novelty threshold for convergence detection
    """
    total_comments: int = Field(..., ge=0)
    """
    Total comments extracted across all rounds
    """
    timestamp: AwareDatetime
    """
    ISO 8601 UTC timestamp when event was emitted
    """
    meeting_id: UUID
    """
    UUID of the meeting this event relates to. Used for event correlation and tracing.
    """
